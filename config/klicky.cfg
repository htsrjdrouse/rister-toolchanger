# Klicky Probe Macros for Rister Toolchanger (E0 Tool)
# Compatible with unified toolchanger framework
# Add these to your klicky_probe.cfg or similar configuration file

[gcode_macro KLICKY_PROBE_UNLOAD]
description: Unload Klicky probe from E0 tool
gcode:
    # Ensure we're in absolute positioning mode
    G90
    
    # Move to initial Y position with fast speed
    G1 Y263.000 F3000
    
    # Brief pause for stability
    G4 P1000 
    
    # Move to X position for probe release
    G1 X15.5 F3000
    
    # Brief pause
    G4 P1000 
    
    # Move out to approach position
    G1 Y400.000 F3000
    
    # Slow approach to probe dock for release
    G1 Y435.000 F1000
    
    # Pause to ensure probe is properly seated
    G4 P1000 
    
    # Move away from probe dock
    G1 X50 F3000
    
    # Return to safe Y position
    G1 Y400.000 F1000
    
    # Final return to initial position
    G1 Y263.000 F3000
    
    # Final pause for stability
    G4 P1000
    
    # Log the operation
    RESPOND MSG="Klicky probe unloaded successfully"

[gcode_macro KLICKY_PROBE_LOAD]
description: Load Klicky probe onto E0 tool
gcode:
    # Ensure we're in absolute positioning mode
    G90
    
    # Move to initial Y position with fast speed
    G1 Y263.000 F3000
    
    # Brief pause for stability
    G4 P1000 
    
    # Move to X position for probe pickup
    G1 X15.5 F3000
    
    # Move to probe approach position
    G1 Y420 F3000
    
    # Slow approach to engage probe
    G1 Y438 F1000
    
    # Extended pause to ensure proper engagement
    G4 P2000
    
    # Retract slightly to secure probe
    G1 Y420 F1000
    
    # Fast move to clear probe dock area
    G1 Y254 F5000
    
    # Final pause for stability
    G4 P1000
    
    # Log the operation
    RESPOND MSG="Klicky probe loaded successfully"

# Use KLICKY_PROBE_LOAD before probing operations
# Use KLICKY_PROBE_UNLOAD after probing operations
